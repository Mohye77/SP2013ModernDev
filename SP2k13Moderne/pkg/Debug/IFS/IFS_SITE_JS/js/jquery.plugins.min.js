!function(t,e){var n=function(){return n.get.apply(n,arguments)},i=n.utils={isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isPlainObject:function(t){return!!t&&"[object Object]"===Object.prototype.toString.call(t)},toArray:function(t){return Array.prototype.slice.call(t)},getKeys:Object.keys||function(t){var e=[],n="";for(n in t)t.hasOwnProperty(n)&&e.push(n);return e},encode:function(t){return String(t).replace(/[,;"\\=\s%]/g,function(t){return encodeURIComponent(t)})},decode:function(t){return decodeURIComponent(t)},retrieve:function(t,e){return null==t?e:t}};n.defaults={},n.expiresMultiplier=86400,n.set=function(e,n,r){if(i.isPlainObject(e))for(var s in e)e.hasOwnProperty(s)&&this.set(s,e[s],n);else{var o=void 0!==(r=i.isPlainObject(r)?r:{expires:r}).expires?r.expires:this.defaults.expires||"",a=typeof o;"string"===a&&""!==o?o=new Date(o):"number"===a&&(o=new Date(+new Date+1e3*this.expiresMultiplier*o)),""!==o&&"toGMTString"in o&&(o=";expires="+o.toGMTString());var u=r.path||this.defaults.path;u=u?";path="+u:"";var c=r.domain||this.defaults.domain;c=c?";domain="+c:"";var l=r.secure||this.defaults.secure?";secure":"";!1===r.secure&&(l=""),t.cookie=i.encode(e)+"="+i.encode(n)+o+u+c+l}return this},n.setDefault=function(t,e,r){if(i.isPlainObject(t)){for(var s in t)void 0===this.get(s)&&this.set(s,t[s],e);return n}if(void 0===this.get(t))return this.set.apply(this,arguments)},n.remove=function(t){for(var e=0,n=(t=i.isArray(t)?t:i.toArray(arguments)).length;e<n;e++)this.set(t[e],"",-1);return this},n.removeSpecific=function(t,e){if(!e)return this.remove(t);t=i.isArray(t)?t:[t],e.expires=-1;for(var n=0,r=t.length;n<r;n++)this.set(t[n],"",e);return this},n.empty=function(){return this.remove(i.getKeys(this.all()))},n.get=function(t,e){var n=this.all();if(i.isArray(t)){for(var r={},s=0,o=t.length;s<o;s++){var a=t[s];r[a]=i.retrieve(n[a],e)}return r}return i.retrieve(n[t],e)},n.all=function(){if(""===t.cookie)return{};for(var e=t.cookie.split("; "),n={},r=0,s=e.length;r<s;r++){var o=e[r].split("="),a=i.decode(o.shift()),u=i.decode(o.join("="));n[a]=u}return n},n.enabled=function(){if(navigator.cookieEnabled)return!0;var t="_"===n.set("_","_").get("_");return n.remove("_"),t},"function"==typeof define&&define.amd?define(function(){return{cookie:n}}):"undefined"!=typeof exports?exports.cookie=n:window.cookie=n}("undefined"==typeof document?null:document),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){function n(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),r=i.length>>>0;if(0===r)return!1;for(var s=0|e,o=Math.max(s>=0?s:r-Math.abs(s),0);o<r;){if(n(i[o],t))return!0;o++}return!1}}),function(t){var e,n,i=t.event;e=i.special.debouncedresize={setup:function(){t(this).on("resize",e.handler)},teardown:function(){t(this).off("resize",e.handler)},handler:function(t,r){var s=this,o=arguments,a=function(){t.type="debouncedresize",i.dispatch.apply(s,o)};n&&clearTimeout(n),r?a():n=setTimeout(a,e.threshold)},threshold:150}}(jQuery),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(e){return!e.nodeName||-1!==t.inArray(e.nodeName.toLowerCase(),["iframe","#document","html","body"])}function n(e){return t.isFunction(e)||t.isPlainObject(e)?e:{top:e,left:e}}var i=t.scrollTo=function(e,n,i){return t(window).scrollTo(e,n,i)};return i.defaults={axis:"xy",duration:0,limit:!0},t.fn.scrollTo=function(r,s,o){"object"==typeof s&&(o=s,s=0),"function"==typeof o&&(o={onAfter:o}),"max"===r&&(r=9e9),o=t.extend({},i.defaults,o),s=s||o.duration;var a=o.queue&&o.axis.length>1;return a&&(s/=2),o.offset=n(o.offset),o.over=n(o.over),this.each(function(){function u(e){var n=t.extend({},o,{queue:!0,duration:s,complete:e&&function(){e.call(h,d,o)}});f.animate(p,n)}if(null!==r){var c,l=e(this),h=l?this.contentWindow||window:this,f=t(h),d=r,p={};switch(typeof d){case"number":case"string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(d)){d=n(d);break}d=l?t(d):t(d,h);case"object":if(0===d.length)return;(d.is||d.style)&&(c=(d=t(d)).offset())}var g=t.isFunction(o.offset)&&o.offset(h,d)||o.offset;t.each(o.axis.split(""),function(t,e){var n="x"===e?"Left":"Top",r=n.toLowerCase(),s="scroll"+n,m=f[s](),v=i.max(h,e);if(c)p[s]=c[r]+(l?0:m-f.offset()[r]),o.margin&&(p[s]-=parseInt(d.css("margin"+n),10)||0,p[s]-=parseInt(d.css("border"+n+"Width"),10)||0),p[s]+=g[r]||0,o.over[r]&&(p[s]+=d["x"===e?"width":"height"]()*o.over[r]);else{var y=d[r];p[s]=y.slice&&"%"===y.slice(-1)?parseFloat(y)/100*v:y}o.limit&&/^\d+$/.test(p[s])&&(p[s]=p[s]<=0?0:Math.min(p[s],v)),!t&&o.axis.length>1&&(m===p[s]?p={}:a&&(u(o.onAfterFirst),p={}))}),u(o.onAfter)}})},i.max=function(n,i){var r="x"===i?"Width":"Height",s="scroll"+r;if(!e(n))return n[s]-t(n)[r.toLowerCase()]();var o="client"+r,a=n.ownerDocument||n.document,u=a.documentElement,c=a.body;return Math.max(u[s],c[s])-Math.min(u[o],c[o])},t.Tween.propHooks.scrollLeft=t.Tween.propHooks.scrollTop={get:function(e){return t(e.elem)[e.prop]()},set:function(e){var n=this.get(e);if(e.options.interrupt&&e._last&&e._last!==n)return t(e.elem).stop();var i=Math.round(e.now);n!==i&&(t(e.elem)[e.prop](i),e._last=this.get(e))}},i}),function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(n){return t.Bloodhound=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function(t){var e=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){t.each(e,function(t,e){return n(e,t)})},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){if(!(i=n.call(null,r,t,e)))return!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){if(i=n.call(null,r,t,e))return!1}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){return t.isFunction(e)?e:function(){return String(e)}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s,o,a=this,u=arguments;return s=function(){i=null,n||(r=t.apply(a,u))},o=n&&!i,clearTimeout(i),i=setTimeout(s,e),o&&(r=t.apply(a,u)),r}},throttle:function(t,e){var n,i,r,s,o,a;return o=0,a=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var u=new Date,c=e-(u-o);return n=this,i=arguments,c<=0?(clearTimeout(r),r=null,o=u,s=t.apply(n,i)):r||(r=setTimeout(a,c)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n="0.11.1",i=function(){"use strict";function t(t){return(t=e.toStr(t))?t.split(/\s+/):[]}function n(t){return(t=e.toStr(t))?t.split(/\W+/):[]}function i(t){return function(n){return n=e.isArray(n)?n:[].slice.call(arguments,0),function(i){var r=[];return e.each(n,function(n){r=r.concat(t(e.toStr(i[n])))}),r}}}return{nonword:n,whitespace:t,obj:{nonword:i(n),whitespace:i(t)}}}(),r=function(){"use strict";function n(n){this.maxSize=e.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function i(){this.head=this.tail=null}return e.mixin(n.prototype,{set:function(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key],this.size--),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new function(t,e){this.key=t,this.val=e,this.prev=this.next=null}(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val},reset:function(){this.size=0,this.hash={},this.list=new i}}),e.mixin(i.prototype,{add:function(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),n}(),s=function(){"use strict";function n(t,n){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=n||o,!this.ls&&this._noop()}function i(){return(new Date).getTime()}function r(t){return JSON.stringify(e.isUndefined(t)?null:t)}function s(e){return t.parseJSON(e)}var o;try{(o=window.localStorage).setItem("~~~","!"),o.removeItem("~~~")}catch(t){o=null}return e.mixin(n.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(t){"QuotaExceededError"===t.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),s(this.ls.getItem(this._prefix(t)))},set:function(t,n,s){return e.isNumber(s)?this._safeSet(this._ttlKey(t),r(i()+s)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),r(n))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=function(t){var e,n,i=[],r=o.length;for(e=0;e<r;e++)(n=o.key(e)).match(t)&&i.push(n.replace(t,""));return i}(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var n=s(this.ls.getItem(this._ttlKey(t)));return!!(e.isNumber(n)&&i()>n)}}),n}(),o=function(){"use strict";function n(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=!1===t.cache?new r(0):a}var i=0,s={},o=6,a=new r(10);return n.setMaxPendingRequests=function(t){o=t},n.resetCache=function(){a.reset()},e.mixin(n.prototype,{_fingerprint:function(e){return(e=e||{}).url+e.type+t.param(e.data||{})},_get:function(t,e){function n(t){e(null,t),c._cache.set(a,t)}function r(){e(!0)}var a,u,c=this;a=this._fingerprint(t),this.cancelled||a!==this.lastReq||((u=s[a])?u.done(n).fail(r):i<o?(i++,s[a]=this._send(t).done(n).fail(r).always(function(){i--,delete s[a],c.onDeckRequestArgs&&(c._get.apply(c,c.onDeckRequestArgs),c.onDeckRequestArgs=null)})):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var r,s;i=i||t.noop,n=e.isString(n)?{url:n}:n||{},s=this._fingerprint(n),this.cancelled=!1,this.lastReq=s,(r=this._cache.get(s))?i(null,r):this._get(n,i)},cancel:function(){this.cancelled=!0}}),n}(),a=window.SearchIndex=function(){"use strict";function n(n){(n=n||{}).datumTokenizer&&n.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||e.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.reset()}function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function r(){var t={};return t[o]=[],t[s]={},t}var s="c",o="i";return e.mixin(n.prototype,{bootstrap:function(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var a,u;n.datums[a=n.identify(t)]=t,u=i(n.datumTokenizer(t)),e.each(u,function(t){var e,i,u;for(e=n.trie,i=t.split("");u=i.shift();)(e=e[s][u]||(e[s][u]=r()))[o].push(a)})})},get:function(t){var n=this;return e.map(t,function(t){return n.datums[t]})},search:function(t){var n,r,a=this;return n=i(this.queryTokenizer(t)),e.each(n,function(t){var e,n,i,u;if(r&&0===r.length)return!1;for(e=a.trie,n=t.split("");e&&(i=n.shift());)e=e[s][i];if(!e||0!==n.length)return r=[],!1;u=e[o].slice(0),r=r?function(t,e){var n=0,i=0,r=[];t=t.sort(),e=e.sort();for(var s=t.length,o=e.length;n<s&&i<o;)t[n]<e[i]?n++:t[n]>e[i]?i++:(r.push(t[n]),n++,i++);return r}(r,u):u}),r?e.map(function(t){for(var e={},n=[],i=0,r=t.length;i<r;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}(r),function(t){return a.datums[t]}):[]},all:function(){var t=[];for(var e in this.datums)t.push(this.datums[e]);return t},reset:function(){this.datums={},this.trie=r()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),n}(),u=function(){"use strict";function t(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new s(t.cacheKey)}var n;return n={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(t){this.cache&&(this.storage.set(n.data,t,this.ttl),this.storage.set(n.protocol,location.protocol,this.ttl),this.storage.set(n.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var t,e={};return this.cache?(e.data=this.storage.get(n.data),e.protocol=this.storage.get(n.protocol),e.thumbprint=this.storage.get(n.thumbprint),t=e.thumbprint!==this.thumbprint||e.protocol!==location.protocol,e.data&&!t?e.data:null):null},fromNetwork:function(t){var e,n=this;t&&(e=this.prepare(this._settings()),this.transport(e).fail(function(){t(!0)}).done(function(e){t(null,n.transform(e))}))},clear:function(){return this.storage.clear(),this}}),t}(),c=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new o({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(t,e){var n,i=this;if(e)return t=t||"",n=this.prepare(t,this._settings()),this.transport.get(n,function(t,n){e(t?[]:i.transform(n))})},cancelLastRequest:function(){this.transport.cancel()}}),t}(),l=function(){"use strict";function i(n){var i;if(n)return i={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},n=e.isString(n)?{url:n}:n,!(n=e.mixin(i,n)).url&&t.error("remote requires url to be set"),n.transform=n.filter||n.transform,n.prepare=function(t){var e,n,i;if(e=t.prepare,n=t.replace,i=t.wildcard,e)return e;e=n?function(t,e){return e.url=n(e.url,t),e}:t.wildcard?function(t,e){return e.url=e.url.replace(i,encodeURIComponent(t)),e}:function(t,e){return e};return e}(n),n.limiter=function(t){var n,i,r;n=t.limiter,i=t.rateLimitBy,r=t.rateLimitWait,n||(n=/^throttle$/i.test(i)?function(t){return function(n){return e.throttle(n,t)}}(r):function(t){return function(n){return e.debounce(n,t)}}(r));return n}(n),n.transport=n.transport?r(n.transport):t.ajax,delete n.replace,delete n.wildcard,delete n.rateLimitBy,delete n.rateLimitWait,n}function r(n){return function(i){var r=t.Deferred();return n(i,function(t){e.defer(function(){r.resolve(t)})},function(t){e.defer(function(){r.reject(t)})}),r}}return function(s){var o,a;return o={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},!(s=e.mixin(o,s||{})).datumTokenizer&&t.error("datumTokenizer is required"),!s.queryTokenizer&&t.error("queryTokenizer is required"),a=s.sorter,s.sorter=a?function(t){return t.sort(a)}:e.identity,s.local=e.isFunction(s.local)?s.local():s.local,s.prefetch=function(i){var s;return i?(s={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},i=e.isString(i)?{url:i}:i,!(i=e.mixin(s,i)).url&&t.error("prefetch requires url to be set"),i.transform=i.filter||i.transform,i.cacheKey=i.cacheKey||i.url,i.thumbprint=n+i.thumbprint,i.transport=i.transport?r(i.transport):t.ajax,i):null}(s.prefetch),s.remote=i(s.remote),s}}();return function(){"use strict";function n(t){t=l(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new c(t.remote):null,this.prefetch=t.prefetch?new u(t.prefetch):null,this.index=new a({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),!1!==t.initialize&&this.initialize()}var r;return r=window&&window.Bloodhound,n.noConflict=function(){return window&&(window.Bloodhound=r),n},n.tokenizers=i,e.mixin(n.prototype,{__ttAdapter:function(){var t=this;return this.remote?function(e,n,i){return t.search(e,n,i)}:function(e,n){return t.search(e,n)}},_loadPrefetch:function(){var e,n,i=this;return e=t.Deferred(),this.prefetch?(n=this.prefetch.fromCache())?(this.index.bootstrap(n),e.resolve()):this.prefetch.fromNetwork(function(t,n){if(t)return e.reject();i.add(n),i.prefetch.store(i.index.serialize()),e.resolve()}):e.resolve(),e.promise()},_initialize:function(){var t=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(function(){t.add(t.local)}),this.initPromise},initialize:function(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function(t){return this.index.add(t),this},get:function(t){return t=e.isArray(t)?t:[].slice.call(arguments),this.index.get(t)},search:function(t,n,i){var r,s=this;return r=this.sorter(this.index.search(t)),n(this.remote?r.slice():r),this.remote&&r.length<this.sufficient?this.remote.get(t,function(t){var n=[];e.each(t,function(t){!e.some(r,function(e){return s.identify(t)===s.identify(e)})&&n.push(t)}),i&&i(n)}):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return o.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),n}()}),function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(0,function(t){var e=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!(!t||1!==t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function(t){return e.isUndefined(t)||null===t?"":t+""},bind:t.proxy,each:function(e,n){t.each(e,function(t,e){return n(e,t)})},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,r){if(!(i=n.call(null,r,t,e)))return!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,r){if(i=n.call(null,r,t,e))return!1}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function(e){return t.isFunction(e)?e:function(){return String(e)}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,r;return function(){var s,o,a=this,u=arguments;return s=function(){i=null,n||(r=t.apply(a,u))},o=n&&!i,clearTimeout(i),i=setTimeout(s,e),o&&(r=t.apply(a,u)),r}},throttle:function(t,e){var n,i,r,s,o,a;return o=0,a=function(){o=new Date,r=null,s=t.apply(n,i)},function(){var u=new Date,c=e-(u-o);return n=this,i=arguments,c<=0?(clearTimeout(r),r=null,o=u,s=t.apply(n,i)):r||(r=setTimeout(a,c)),s}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}}}(),n=function(){"use strict";var t={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(n){var i,r;return r=e.mixin({},t,n),i={css:function(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return e.isMsie()&&e.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),t}(),classes:r,html:function(t){return{wrapper:'<span class="'+t.wrapper+'"></span>',menu:'<div class="'+t.menu+'"></div>'}}(r),selectors:function(t){var n={};return e.each(t,function(t,e){n[e]="."+t}),n}(r)},{css:i.css,html:i.html,classes:i.classes,selectors:i.selectors,mixin:function(t){e.mixin(t,i)}}}}(),i=function(){"use strict";function n(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}var i;return"typeahead:",i={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},e.mixin(n.prototype,{_trigger:function(e,n){var i;return i=t.Event("typeahead:"+e),(n=n||[]).unshift(i),this.$el.trigger.apply(this.$el,n),i},before:function(t){var e;return e=[].slice.call(arguments,1),this._trigger("before"+t,e).isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=i[t])&&this._trigger(e,[].slice.call(arguments,1))}}),n}(),r=function(){"use strict";function t(t,e,i,r){var s;if(!i)return this;for(e=e.split(n),i=r?function(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}(i,r):i,this._callbacks=this._callbacks||{};s=e.shift();)this._callbacks[s]=this._callbacks[s]||{sync:[],async:[]},this._callbacks[s][t].push(i);return this}function e(t,e,n){return function(){for(var i,r=0,s=t.length;!i&&r<s;r+=1)i=!1===t[r].apply(e,n);return!i}}var n=/\s+/,i=window.setImmediate?function(t){setImmediate(function(){t()})}:function(t){setTimeout(function(){t()},0)};return{onSync:function(e,n,i){return t.call(this,"sync",e,n,i)},onAsync:function(e,n,i){return t.call(this,"async",e,n,i)},off:function(t){var e;if(!this._callbacks)return this;for(t=t.split(n);e=t.shift();)delete this._callbacks[e];return this},trigger:function(t){var r,s,o,a,u;if(!this._callbacks)return this;for(t=t.split(n),o=[].slice.call(arguments,1);(r=t.shift())&&(s=this._callbacks[r]);)a=e(s.sync,this,[r].concat(o)),u=e(s.async,this,[r].concat(o)),a()&&i(u);return this}}}(),s=function(t){"use strict";var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(i){function r(t,e){for(var n,i=0;i<t.childNodes.length;i++)3===(n=t.childNodes[i]).nodeType?i+=e(n)?1:0:r(n,e)}var s;(i=e.mixin({},n,i)).node&&i.pattern&&(i.pattern=e.isArray(i.pattern)?i.pattern:[i.pattern],s=function(t,n,i){for(var r,s=[],o=0,a=t.length;o<a;o++)s.push(e.escapeRegExChars(t[o]));return r=i?"\\b("+s.join("|")+")\\b":"("+s.join("|")+")",n?new RegExp(r):new RegExp(r,"i")}(i.pattern,i.caseSensitive,i.wordsOnly),r(i.node,function(e){var n,r,o;return(n=s.exec(e.data))&&(o=t.createElement(i.tagName),i.className&&(o.className=i.className),(r=e.splitText(n.index)).splitText(n[0].length),o.appendChild(r.cloneNode(!0)),e.parentNode.replaceChild(o,r)),!!n}))}}(window.document),o=function(){"use strict";function n(n,i){(n=n||{}).input||t.error("input is missing"),i.mixin(this),this.$hint=t(n.hint),this.$input=t(n.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=function(e){return t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=e.noop)}function i(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var s;return s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return e.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},e.mixin(n.prototype,r,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function(t){var e=s[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(t,e){var n;switch(t){case"up":case"down":n=!i(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function(t,e){var n;switch(t){case"tab":n=!i(e);break;default:n=!0}return n},_checkLanguageDirection:function(){var t=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==t&&(this.dir=t,this.$hint.attr("dir",t),this.trigger("langDirChanged",t))},_setQuery:function(t,e){var i,r;r=!!(i=function(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}(t,this.query))&&this.query.length!==t.length,this.query=t,e||i?!e&&r&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,n,i,r,o=this;return t=e.bind(this._onBlur,this),n=e.bind(this._onFocus,this),i=e.bind(this._onKeydown,this),r=e.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",n).on("keydown.tt",i),!e.isMsie()||e.isMsie()>9?this.$input.on("input.tt",r):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){s[t.which||t.keyCode]||e.defer(e.bind(o._onInput,o,t))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(t,e){this.setInputValue(t),this._setQuery(t,e)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(t){this.$input.val(t),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(t){this.$hint.val(t)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var t,e,n;n=(t=this.getInputValue())!==(e=this.getHint())&&0===e.indexOf(t),!(""!==t&&n&&!this.hasOverflow())&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,n,i;return t=this.$input.val().length,n=this.$input[0].selectionStart,e.isNumber(n)?n===t:!document.selection||((i=document.selection.createRange()).moveStart("character",-t),t===i.text.length)},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),n}(),a=function(){"use strict";function n(n,i){(n=n||{}).templates=n.templates||{},n.templates.notFound=n.templates.notFound||n.templates.empty,n.source||t.error("missing source"),n.node||t.error("missing node"),n.name&&!function(t){return/^[_a-zA-Z0-9-]+$/.test(t)}(n.name)&&t.error("invalid dataset name: "+n.name),i.mixin(this),this.highlight=!!n.highlight,this.name=n.name||o(),this.limit=n.limit||5,this.displayFn=function(t){return t=t||e.stringify,e.isFunction(t)?t:function(e){return e[t]}}(n.display||n.displayKey),this.templates=function(n,i){return{notFound:n.notFound&&e.templatify(n.notFound),pending:n.pending&&e.templatify(n.pending),header:n.header&&e.templatify(n.header),footer:n.footer&&e.templatify(n.footer),suggestion:n.suggestion||function(e){return t("<div>").text(i(e))}}}(n.templates,this.displayFn),this.source=n.source.__ttAdapter?n.source.__ttAdapter():n.source,this.async=e.isUndefined(n.async)?this.source.length>2:!!n.async,this._resetLastSuggestion(),this.$el=t(n.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}var i,o;return i={val:"tt-selectable-display",obj:"tt-selectable-object"},o=e.getIdGenerator(),n.extractData=function(e){var n=t(e);return n.data(i.obj)?{val:n.data(i.val)||"",obj:n.data(i.obj)||null}:null},e.mixin(n.prototype,r,{_overwrite:function(t,e){(e=e||[]).length?this._renderSuggestions(t,e):this.async&&this.templates.pending?this._renderPending(t):!this.async&&this.templates.notFound?this._renderNotFound(t):this._empty(),this.trigger("rendered",this.name,e,!1)},_append:function(t,e){(e=e||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(t,e):e.length?this._renderSuggestions(t,e):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(t),this.trigger("rendered",this.name,e,!0)},_renderSuggestions:function(t,e){var n;n=this._getSuggestionsFragment(t,e),this.$lastSuggestion=n.children().last(),this.$el.html(n).prepend(this._getHeader(t,e)).append(this._getFooter(t,e))},_appendSuggestions:function(t,e){var n,i;i=(n=this._getSuggestionsFragment(t,e)).children().last(),this.$lastSuggestion.after(n),this.$lastSuggestion=i},_renderPending:function(t){var e=this.templates.pending;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_renderNotFound:function(t){var e=this.templates.notFound;this._resetLastSuggestion(),e&&this.$el.html(e({query:t,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(n,r){var o,a=this;return o=document.createDocumentFragment(),e.each(r,function(e){var r,s;s=a._injectQuery(n,e),r=t(a.templates.suggestion(s)).data(i.obj,e).data(i.val,a.displayFn(e)).addClass(a.classes.suggestion+" "+a.classes.selectable),o.appendChild(r[0])}),this.highlight&&s({className:this.classes.highlight,node:o,pattern:n}),t(o)},_getFooter:function(t,e){return this.templates.footer?this.templates.footer({query:t,suggestions:e,dataset:this.name}):null},_getHeader:function(t,e){return this.templates.header?this.templates.header({query:t,suggestions:e,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=t()},_injectQuery:function(t,n){return e.isObject(n)?e.mixin({_query:t},n):n},update:function(e){function n(t){s||(s=!0,t=(t||[]).slice(0,i.limit),o=t.length,i._overwrite(e,t),o<i.limit&&i.async&&i.trigger("asyncRequested",e))}var i=this,r=!1,s=!1,o=0;this.cancel(),this.cancel=function(){r=!0,i.cancel=t.noop,i.async&&i.trigger("asyncCanceled",e)},this.source(e,n,function(n){n=n||[],!r&&o<i.limit&&(i.cancel=t.noop,o+=n.length,i._append(e,n.slice(0,i.limit-o)),i.async&&i.trigger("asyncReceived",e))}),!s&&n([])},cancel:t.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=t("<div>")}}),n}(),u=function(){"use strict";function n(n,i){var r=this;(n=n||{}).node||t.error("node is required"),i.mixin(this),this.$node=t(n.node),this.query=null,this.datasets=e.map(n.datasets,function(e){var n=r.$node.find(e.node).first();return e.node=n.length?n:t("<div>").appendTo(r.$node),new a(e,i)})}return e.mixin(n.prototype,r,{_onSelectableClick:function(e){this.trigger("selectableClicked",t(e.currentTarget))},_onRendered:function(t,e,n,i){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",e,n,i)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return e.every(this.datasets,function(t){return t.isEmpty()})},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var t=this.getActiveSelectable();t&&t.removeClass(this.classes.cursor)},_ensureVisible:function(t){var e,n,i,r;n=(e=t.position().top)+t.outerHeight(!0),i=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),e<0?this.$node.scrollTop(i+e):r<n&&this.$node.scrollTop(i+(n-r))},bind:function(){var t,n=this;return t=e.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),e.each(this.datasets,function(t){t.onSync("asyncRequested",n._propagate,n).onSync("asyncCanceled",n._propagate,n).onSync("asyncReceived",n._propagate,n).onSync("rendered",n._onRendered,n).onSync("cleared",n._onCleared,n)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(t){this.$node.attr("dir",t)},selectableRelativeToCursor:function(t){var e,n,i,r;return n=this.getActiveSelectable(),e=this._getSelectables(),i=n?e.index(n):-1,r=i+t,r=(r+1)%(e.length+1)-1,-1===(r=r<-1?e.length-1:r)?null:e.eq(r)},setCursor:function(t){this._removeCursor(),(t=t&&t.first())&&(t.addClass(this.classes.cursor),this._ensureVisible(t))},getSelectableData:function(t){return t&&t.length?a.extractData(t):null},getActiveSelectable:function(){var t=this._getSelectables().filter(this.selectors.cursor).first();return t.length?t:null},getTopSelectable:function(){var t=this._getSelectables().first();return t.length?t:null},update:function(t){var n=t!==this.query;return n&&(this.query=t,e.each(this.datasets,function(e){e.update(t)})),n},empty:function(){e.each(this.datasets,function(t){t.clear()}),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt"),this.$node=t("<div>"),e.each(this.datasets,function(t){t.destroy()})}}),n}(),c=function(){"use strict";function t(){u.apply(this,[].slice.call(arguments,0))}var n=u.prototype;return e.mixin(t.prototype,u.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),n.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),n.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),n._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(t){return this.$node.css("ltr"===t?this.css.ltr:this.css.rtl),n.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),t}(),l=function(){"use strict";function n(n,r){var s,o,a,u,c,l,h,f,d,p,g;(n=n||{}).input||t.error("missing input"),n.menu||t.error("missing menu"),n.eventBus||t.error("missing event bus"),r.mixin(this),this.eventBus=n.eventBus,this.minLength=e.isNumber(n.minLength)?n.minLength:1,this.input=n.input,this.menu=n.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),s=i(this,"activate","open","_onFocused"),o=i(this,"deactivate","_onBlurred"),a=i(this,"isActive","isOpen","_onEnterKeyed"),u=i(this,"isActive","isOpen","_onTabKeyed"),c=i(this,"isActive","_onEscKeyed"),l=i(this,"isActive","open","_onUpKeyed"),h=i(this,"isActive","open","_onDownKeyed"),f=i(this,"isActive","isOpen","_onLeftKeyed"),d=i(this,"isActive","isOpen","_onRightKeyed"),p=i(this,"_openIfActive","_onQueryChanged"),g=i(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",s,this).onSync("blurred",o,this).onSync("enterKeyed",a,this).onSync("tabKeyed",u,this).onSync("escKeyed",c,this).onSync("upKeyed",l,this).onSync("downKeyed",h,this).onSync("leftKeyed",f,this).onSync("rightKeyed",d,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}function i(t){var n=[].slice.call(arguments,1);return function(){var i=[].slice.call(arguments);e.each(n,function(e){return t[e].apply(t,i)})}}return e.mixin(n.prototype,{_hacks:function(){var n,i;n=this.input.$input||t("<div>"),i=this.menu.$node||t("<div>"),n.on("blur.tt",function(t){var r,s,o;r=document.activeElement,s=i.is(r),o=i.has(r).length>0,e.isMsie()&&(s||o)&&(t.preventDefault(),t.stopImmediatePropagation(),e.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function(t,e){this.select(e)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(t,e,n,i){this._updateHint(),this.eventBus.trigger("render",n,i,e)},_onAsyncRequested:function(t,e,n){this.eventBus.trigger("asyncrequest",n,e)},_onAsyncCanceled:function(t,e,n){this.eventBus.trigger("asynccancel",n,e)},_onAsyncReceived:function(t,e,n){this.eventBus.trigger("asyncreceive",n,e)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())&&this.select(n)&&e.preventDefault()},_onTabKeyed:function(t,e){var n;(n=this.menu.getActiveSelectable())?this.select(n)&&e.preventDefault():(n=this.menu.getTopSelectable())&&this.autocomplete(n)&&e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(t,e){this._minLengthMet(e)?this.menu.update(e):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(t,e){this.dir!==e&&(this.dir=e,this.menu.setLanguageDirection(e))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(t){return(t=e.isString(t)?t:this.input.getQuery()||"").length>=this.minLength},_updateHint:function(){var t,n,i,r,s,a;t=this.menu.getTopSelectable(),n=this.menu.getSelectableData(t),i=this.input.getInputValue(),!n||e.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(r=o.normalizeQuery(i),s=e.escapeRegExChars(r),(a=new RegExp("^(?:"+s+")(.+$)","i").exec(n.val))&&this.input.setHint(i+a[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(t){this.input.setQuery(e.toStr(t))},getVal:function(){return this.input.getQuery()},select:function(t){var e=this.menu.getSelectableData(t);return!(!e||this.eventBus.before("select",e.obj))&&(this.input.setQuery(e.val,!0),this.eventBus.trigger("select",e.obj),this.close(),!0)},autocomplete:function(t){var e,n;return e=this.input.getQuery(),n=this.menu.getSelectableData(t),!(!(n&&e!==n.val)||this.eventBus.before("autocomplete",n.obj))&&(this.input.setQuery(n.val),this.eventBus.trigger("autocomplete",n.obj),!0)},moveCursor:function(t){var e,n,i,r;return e=this.input.getQuery(),n=this.menu.selectableRelativeToCursor(t),i=this.menu.getSelectableData(n),r=i?i.obj:null,!(this._minLengthMet()&&this.menu.update(e))&&!this.eventBus.before("cursorchange",r)&&(this.menu.setCursor(n),i?this.input.setInputValue(i.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),n}();!function(){"use strict";function r(e,n){e.each(function(){var e,i=t(this);(e=i.data(h.typeahead))&&n(e,i)})}function s(n){var i,r;return i=e.isJQuery(n)||e.isElement(n),(r=i?t(n).first():[]).length?r:null}var a,h,f;a=t.fn.typeahead,h={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},f={initialize:function(r,a){var f;return a=e.isArray(a)?a:[].slice.call(arguments,1),r=r||{},f=n(r.classNames),this.each(function(){var n,d,p,g,m,v,y,_,b,w,x;e.each(a,function(t){t.highlight=!!r.highlight}),n=t(this),d=t(f.html.wrapper),p=s(r.hint),g=s(r.menu),m=!1!==r.hint&&!p,v=!1!==r.menu&&!g,m&&(p=function(t,e){return t.clone().addClass(e.classes.hint).removeData().css(e.css.hint).css(function(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}(t)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}(n,f)),v&&(g=t(f.html.menu).css(f.css.menu)),p&&p.val(""),n=function(t,e){t.data(h.attrs,{dir:t.attr("dir"),autocomplete:t.attr("autocomplete"),spellcheck:t.attr("spellcheck"),style:t.attr("style")}),t.addClass(e.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!t.attr("dir")&&t.attr("dir","auto")}catch(t){}return t}(n,f),(m||v)&&(d.css(f.css.wrapper),n.css(m?f.css.input:f.css.inputWithNoHint),n.wrap(d).parent().prepend(m?p:null).append(v?g:null)),x=v?c:u,y=new i({el:n}),_=new o({hint:p,input:n},f),b=new x({node:g,datasets:a},f),w=new l({input:_,menu:b,eventBus:y,minLength:r.minLength},f),n.data(h.www,f),n.data(h.typeahead,w)})},isEnabled:function(){var t;return r(this.first(),function(e){t=e.isEnabled()}),t},enable:function(){return r(this,function(t){t.enable()}),this},disable:function(){return r(this,function(t){t.disable()}),this},isActive:function(){var t;return r(this.first(),function(e){t=e.isActive()}),t},activate:function(){return r(this,function(t){t.activate()}),this},deactivate:function(){return r(this,function(t){t.deactivate()}),this},isOpen:function(){var t;return r(this.first(),function(e){t=e.isOpen()}),t},open:function(){return r(this,function(t){t.open()}),this},close:function(){return r(this,function(t){t.close()}),this},select:function(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.select(i)}),n},autocomplete:function(e){var n=!1,i=t(e);return r(this.first(),function(t){n=t.autocomplete(i)}),n},moveCursor:function(t){var e=!1;return r(this.first(),function(n){e=n.moveCursor(t)}),e},val:function(t){var e;return arguments.length?(r(this,function(e){e.setVal(t)}),this):(r(this.first(),function(t){e=t.getVal()}),e)},destroy:function(){return r(this,function(t,n){!function(t){var n,i;n=t.data(h.www),i=t.parent().filter(n.selectors.wrapper),e.each(t.data(h.attrs),function(n,i){e.isUndefined(n)?t.removeAttr(i):t.attr(i,n)}),t.removeData(h.typeahead).removeData(h.www).removeData(h.attr).removeClass(n.classes.input),i.length&&(t.detach().insertAfter(i),i.remove())}(n),t.destroy()}),this}},t.fn.typeahead=function(t){return f[t]?f[t].apply(this,[].slice.call(arguments,1)):f.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function(){return t.fn.typeahead=a,this}}()}),function(t,e){var n=e.jQuery;"object"==typeof exports?module.exports=n?t(e,n):function(n){if(n&&!n.fn)throw"Provide jQuery or null";return t(e,n)}:"function"==typeof define&&define.amd?define(function(){return t(e)}):t(e,!1)}(function(t,e){"use strict";function n(t,e){return function(){var n,i=this.base;return this.base=t,n=e.apply(this,arguments),this.base=i,n}}function i(t,e){return V(e)&&((e=n(t?t._d?t:n(o,t):o,e))._d=1),e}function r(t,e){var n,r=e.props;for(n in r)!gt.test(n)||t[n]&&t[n].fix||(t[n]="convert"!==n?i(t.constructor.prototype[n],r[n]):r[n])}function s(t){return t}function o(){return""}function a(t){this.name=(e.link?"JsViews":"JsRender")+" Error",this.message=t||this.name}function u(t,e){if(t){for(var n in e)t[n]=e[n];return t}}function c(t,e,n){return t?M(t)?c.apply(K,t):(J.delimiters=[t,e,nt=n?n.charAt(0):nt],X=t.charAt(0),Y=t.charAt(1),tt=e.charAt(0),et=e.charAt(1),t="\\"+X+"(\\"+nt+")?\\"+Y,e="\\"+tt+"\\"+et,O="(?:(\\w+(?=[\\/\\s\\"+tt+"]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\"+tt+"]|\\"+tt+"(?!\\"+et+"))*?)",W.rTag="(?:"+O+")",O=new RegExp("(?:"+t+O+"(\\/)?|\\"+X+"(\\"+nt+")?\\"+Y+"(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))"+e,"g"),W.rTmpl=new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|"+t+".*"+e),Z):J.delimiters}function l(){var t=this.get("item");return t?t.index:void 0}function h(){return this.index}function f(e,n,i){var r,s,o,a,c=this,l=!rt&&void 0!==n,h=c.ctx;if(e in h||e in(h=Q)){if(o=h&&h[e],"tag"===e||"root"===e||"parentTags"===e||c._.it===e)return o}else h=void 0;if((!o||!V(o)&&c.linked||c.tagCtx)&&(o&&o._cxp||(h!==Q&&(h=(c=c.tagCtx?c:!(c=c.scope||c).isTop&&c.ctx.tag||c)._ocps,o=h&&h[e]||o),o&&o._cxp||!i&&!l||(o=W._crcp(e,o,c,h))),a=o&&o._cxp)){if(l)return W._ucp(e,n,c,a);if(i)return(s=o[1]?W._ceo(o[1].deps):[st]).unshift(o[0]),s._cxp=a,s;o=o[1]?a.tag&&a.tag.cvtArgs?a.tag.cvtArgs(!0,a.tagElse)[a.ind]:o[1](o[0].data,o[0],W):o[0]._ocp}return o&&V(o)&&(u(r=function(){return o.apply(this&&this!==t?this:c,arguments)},o),r._vw=c),r||o}function d(t,e){return(t=t[+e===e?"args":"props"])&&t[e]}function p(t,e,n,i,r,s,o,a){var u,c,h,f="array"===e;this.content=a,this.views=f?[]:{},this.data=i,this.tmpl=r,h=this._={key:0,useKey:f?0:1,id:""+yt++,onRender:o,bnds:{}},this.linked=!!o,this.type=e||"top",(this.parent=n)?(this.root=n.root||this,u=n.views,c=n._,this.isTop=c.scp,this.scope=(!t.tag||t.tag===n.ctx.tag)&&!this.isTop&&n.scope||this,c.useKey?(u[h.key="_"+c.useKey++]=this,this.index=At,this.getIndex=l):u.length===(h.key=this.index=s)?u.push(this):u.splice(s,0,this),this.ctx=t||n.ctx):this.ctx=t||{}}function g(t,n,i,r){function s(n){var s,a;if(""+n===n||n.nodeType>0&&(o=n)){if(!o)if(/^\.\/[^\\:*?"<>]*$/.test(n))(a=H[t=t||n])?n=a:o=document.getElementById(n);else if(e.fn&&!W.rTmpl.test(n))try{o=e(n,document)[0]}catch(t){}o&&(r?n=o.innerHTML:((s=o.getAttribute(xt))&&(s!==kt?(n=H[s],delete H[s]):e.fn&&(n=e.data(o)[kt])),s&&n||(n=g(t=t||(e.fn?kt:n),o.innerHTML,i,r)),n.tmplName=t=t||s,t!==kt&&(H[t]=n),o.setAttribute(xt,t),e.fn&&e.data(o,kt,n))),o=void 0}else n.fn||(n=void 0);return n}var o,a,c=n=n||"";if(W._html=P.html,0===r&&(r=void 0,c=s(c)),r=r||(n.markup?n:{}),r.tmplName=t,i&&(r._parentTmpl=i),!c&&n.markup&&(c=s(n.markup))&&c.fn&&(c=c.markup),void 0!==c)return c.fn||n.fn?c.fn&&(a=c):(n=y(c,r),S(c.replace(lt,"\\$&"),n)),a||function(t){var e,n,i;for(e in $t)t[n=e+"s"]&&(i=t[n],t[n]={},K[n](i,t))}(a=u(function(){return a.render.apply(a,arguments)},n)),a}function m(t,e){return V(t)?t.call(e):t}function v(t){for(var e=[],n=0,i=t.length;n<i;n++)e.push(t[n].unmap());return e}function y(t,n){var i,r=G._wm||{},s=u({tmpls:[],links:{},bnds:[],_is:"template",render:x},n);return s.markup=t,n.htmlTag||(i=dt.exec(t),s.htmlTag=i?i[1].toLowerCase():""),(i=r[s.htmlTag])&&i!==r.div&&(s.markup=e.trim(s.markup)),s}function _(t,e){function n(r,s,o){var a,u,c,l=W.onStore[t];if(r&&typeof r===wt&&!r.nodeType&&!r.markup&&!r.getTgt&&!("viewModel"===t&&r.getters||r.extend)){for(u in r)n(u,r[u],s);return s||K}return void 0===s&&(s=r,r=void 0),r&&""+r!==r&&(o=s,s=r,r=void 0),c=o?"viewModel"===t?o:o[i]=o[i]||{}:n,a=e.compile,null===s?r&&delete c[r]:(a&&((s=a.call(c,r,s,o,0)||{})._is=t),r&&(c[r]=s)),l&&l(r,s,o,a),s}var i=t+"s";K[i]=n}function b(t){Z[t]=function(e){return arguments.length?(J[t]=e,Z):J[t]}}function w(t){return V(t)&&(t={getTgt:t}),t.baseMap&&(t=u(u({},t.baseMap),t)),t.map=function(e,n){return new function(e,n){this.tgt=t.getTgt(e,n)}(e,n)},t}function x(t,e,n,i,r,s){var o,a,u,c,l,h,f,d,p=i,g="";if(!0===e?(n=e,e=void 0):typeof e!==wt&&(e=void 0),(u=this.tag)?(l=this,c=(p=p||l.view).getTmpl(u.template||l.tmpl),arguments.length||(t=p)):c=this,c){if(!i&&t&&"view"===t._is&&(p=t),p&&t===p&&(t=p.data),h=!p,rt=rt||h,p||((e=e||{}).root=t),!rt||G.useViews||c.useViews||p&&p!==L)g=k(c,t,e,n,p,r,s,u);else{if(p?(f=p.data,d=p.index,p.index=At):(f=(p=L).data,p.data=t,p.ctx=e),M(t)&&!n)for(o=0,a=t.length;o<a;o++)p.index=o,p.data=t[o],g+=c.fn(t[o],p,W);else p.data=t,g+=c.fn(t,p,W);p.data=f,p.index=d}h&&(rt=void 0)}return g}function k(t,e,n,i,r,s,o,a){function c(t){(w=u({},n))[b]=t}var l,h,f,d,g,m,v,y,_,b,w,x,k="";if(a&&(_=a.tagName,x=a.tagCtx,n=n?D(n,a.ctx):a.ctx,t===r.content?v=t!==r.ctx._wrp?r.ctx._wrp:void 0:t!==x.content?t===a.template?(v=x.tmpl,n._wrp=x.content):v=x.content||r.content:v=r.content,!1===x.props.link&&((n=n||{}).link=!1),(b=x.props.itemVar)&&("~"!==b.charAt(0)&&C("Use itemVar='~myItem'"),b=b.slice(1))),r&&(o=o||r._.onRender,n=D(n,r.ctx)),!0===s&&(m=!0,s=0),o&&(n&&!1===n.link||a&&a._.noVws)&&(o=void 0),y=o,!0===o&&(y=void 0,o=r._.onRender),n=t.helpers?D(t.helpers,n):n,w=n,M(e)&&!i)for(f=m?r:void 0!==s&&r||new p(n,"array",r,e,t,s,o,v),r&&r._.useKey&&(f._.bnd=!a||a._.bnd&&a),l=0,h=e.length;l<h;l++)b&&c(e[l]),(d=new p(w,"item",f,e[l],t,(s||0)+l,o,f.content))._.it=b,g=t.fn(e[l],d,W),k+=f._.onRender?f._.onRender(g,d):g;else b&&c(e),(f=m?r:new p(w,_||"data",r,e,t,s,o,v))._.it=b,k+=t.fn(e,f,W);return a&&(f.tag=a,f.tagElse=x.index,x.contentView=f),y?y(k,f):k}function A(t){throw new W.Err(t)}function C(t){A("Syntax error\n"+t)}function S(t,e,n,i,r){function s(e){(e-=p)&&m.push(t.substr(p,e).replace(ut,"\\n"))}function o(e,n){e&&(e+="}}",C((n?"{{"+n+"}} block has {{/"+e+" without {{"+e:"Unmatched or missing {{/"+e)+", in template:\n"+t))}var a,u,c,l,h,f=J.allowCode||e&&e.allowCode||!0===Z.allowCode,d=[],p=0,g=[],m=d,v=[,,d];if(f&&e._is&&(e.allowCode=f),n&&(void 0!==i&&(t=t.slice(0,-i.length-2)+tt),t=X+t+et),o(g[0]&&g[0][2].pop()[0]),t.replace(O,function(a,u,h,d,y,_,b,w,x,k,A,S){(b&&u||x&&!h||w&&":"===w.slice(-1)||k)&&C(a),_&&(y=":",d=bt),x=x||n&&!r;var T,j=(u||n)&&[[]],R="",D="",E="",I="",F="",z="",N="",O="",L=!x&&!y;h=h||(w=w||"#data",y),s(S),p=S+a.length,b?f&&m.push(["*","\n"+w.replace(/^:/,"ret+= ").replace(ct,"$1")+";\n"]):h?("else"===h&&(ft.test(w)&&C('for "{{else if expr}}" use "{{else expr}}"'),j=v[8]&&[[]],v[9]=t.substring(v[9],S),v=g.pop(),m=v[2],L=!0),w&&q(w.replace(ut," "),j,e).replace(ht,function(t,e,n,i,r,s,o,a){return i="'"+r+"':",o?(D+=s+",",I+="'"+a+"',"):n?(E+=i+"j._cp("+s+',"'+a+'",view),',z+=i+"'"+a+"',"):e?N+=s:("trigger"===r&&(O+=s),"lateRender"===r&&(T=a),R+=i+s+",",F+=i+"'"+a+"',",l=l||gt.test(r)),""}).slice(0,-1),j&&j[0]&&j.pop(),c=[h,d||!!i||l||"",L&&[],$(I||(":"===h?"'#data',":""),F,z),$(D||(":"===h?"data,":""),R,E),N,O,T,j||0],m.push(c),L&&(g.push(v),(v=c)[9]=p)):A&&(o(A!==v[0]&&"else"!==v[0]&&A,v[0]),v[9]=t.substring(v[9],S),v=g.pop()),o(!v&&A),m=v[2]}),s(t.length),(p=d[d.length-1])&&o(""+p!==p&&+p[9]===p[9]&&p[0]),n){for(u=R(d,t,n),h=[],a=d.length;a--;)h.unshift(d[a][8]);T(u,h)}else u=R(d,e);return u}function T(t,e){var n,i,r=0,s=e.length;for(t.deps=[],t.paths=[];r<s;r++){t.paths.push(i=e[r]);for(n in i)"_jsvto"!==n&&i.hasOwnProperty(n)&&i[n].length&&!i[n].skp&&(t.deps=t.deps.concat(i[n]))}}function $(t,e,n){return[t.slice(0,-1),e.slice(0,-1),n.slice(0,-1)]}function j(t,e){return"\n\t"+(e?e+":{":"")+"args:["+t[0]+"]"+(t[1]||!e?",\n\tprops:{"+t[1]+"}":"")+(t[2]?",\n\tctx:{"+t[2]+"}":"")}function q(t,e,n){var i,r,s,o,a,u=e&&e[0],c={bd:u},l={0:c},h=0,f=(n?n.links:u&&(u.links=u.links||{}))||L.tmpl.links,d=0,p={},g={},m=(t+(n?" ":"")).replace(at,function(m,v,y,_,b,w,x,k,A,T,$,j,q,R,D,E,I,F,z,N){_&&!k&&(b=_+b),w=w||"",y=y||v||j,b=b||A;var O,L,K,B,V,M=")";if("["===(T=T||I||"")&&(T="[j._sq(",M=")]"),!x||a||o){if(u&&E&&!a&&!o&&(!i||s||r)&&(O=g[d-1],N.length-1>z-(O||0))){if(O=N.slice(O,z+m.length),!0!==L)if(K=r||l[d-1].bd,(B=K[K.length-1])&&B.prm){for(;B.sb&&B.sb.prm;)B=B.sb;V=B.sb={path:B.sb,bnd:B.bnd}}else K.push(V={path:K.pop()});(L=f[E=Y+":"+O+" onerror=''"+tt])||(f[E]=!0,f[E]=L=S(E,n,!0)),!0!==L&&V&&(V._cpfn=L,V.prm=c.bd,V.bnd=V.bnd||V.path&&V.path.indexOf("^")>=0)}return a?(a=!q)?m:j+'"':o?(o=!R)?m:j+'"':(y?(g[d]=z++,c=l[++d]={bd:[]},y):"")+(F?d?"":(h=N.slice(h,z),(i?(i=s=r=!1,"\b"):"\b,")+h+(h=z+m.length,u&&e.push(c.bd=[]),"\b")):k?(d&&C(t),u&&e.pop(),i=b,s=_,h=z+m.length,u&&(u=c.bd=e[i]=[],u.skp=!_),b+":"):b?b.split("^").join(".").replace(ot,function(t,n,s,o,a,l,h,f){var p="."===s;if(s&&(b=b.slice(n.length),/^\.?constructor$/.test(f||b)&&C(t),p||(t=(o?'view.ctxPrm("'+o+'")':a?"view":"data")+(f?(l?"."+l:o?"":a?"":"."+s)+(h||""):(f=o?"":a?l||"":s,"")),t=n+("view.data"===(t+=f?"."+f:"").slice(0,9)?t.slice(5):t)),u)){if(K="linkTo"===i?r=e._jsvto=e._jsvto||[]:c.bd,B=p&&K[K.length-1]){if(B._cpfn){for(;B.sb;)B=B.sb;B.bnd&&(b="^"+b.slice(1)),B.sb=b,B.bnd=B.bnd||"^"===b.charAt(0)}}else K.push(b);g[d]=z+(p?1:0)}return t})+(T?(c=l[++d]={bd:[]},p[d]=M,T):w):w||(D?(D=p[d]||D,p[d]=!1,c=l[--d],D+(T?(c=l[++d],p[d]=M,T):"")):$?(p[d]||C(t),","):v?"":(a=q,o=R,'"')))}C(t)});return!d&&m||C(t)}function R(t,e,n){var i,r,s,o,a,u,c,l,h,f,d,p,g,m,v,_,b,w,x,k,A,S,$,q,D,E,I,F,z,N,O=0,L=G.useViews||e.useViews||e.tags||e.templates||e.helpers||e.converters,K="",B={},V=t.length;for(""+e===e?(b=n?'data-link="'+e.replace(ut," ").slice(1,-1)+'"':e,e=0):(b=e.tmplName||"unnamed",e.allowCode&&(B.allowCode=!0),e.debug&&(B.debug=!0),f=e.bnds,_=e.tmpls),i=0;i<V;i++)if(""+(r=t[i])===r)K+='\n+"'+r+'"';else if("*"===(s=r[0]))K+=";\n"+r[1]+"\nret=ret";else{if(o=r[1],k=!n&&r[2],a=j(r[3],"params")+"},"+j(p=r[4]),z=r[6],N=r[7],A=r[9]&&r[9].replace(ct,"$1"),(q="else"===s)?d&&d.push(r[8]):(I=r[5]||!1!==J.debugMode&&"undefined",f&&(d=r[8])&&(d=[d],O=f.push(1))),L=L||p[1]||p[2]||d||/view.(?!index)/.test(p[0]),(D=":"===s)?o&&(s=o===bt?">":o+s):(k&&((w=y(A,B)).tmplName=b+"/"+s,w.useViews=w.useViews||L,R(k,w),L=w.useViews,_.push(w)),q||(x=s,L=L||s&&(!U[s]||!U[s].flow),$=K,K=""),S=(S=t[i+1])&&"else"===S[0]),F=I?";\ntry{\nret+=":"\n+",g="",m="",D&&(d||z||o&&o!==bt||N)){if(E=new Function("data,view,j,u","// "+b+" "+ ++O+" "+s+"\nreturn {"+a+"};"),E._er=I,E._tag=s,E._bd=!!d,E._lr=N,n)return E;T(E,d),h=!0,g=(v='c("'+o+'",view,')+O+",",m=")"}if(K+=D?(n?(I?"try{\n":"")+"return ":F)+(h?(h=void 0,L=l=!0,v+(E?(f[O-1]=E,O):"{"+a+"}")+")"):">"===s?(c=!0,"h("+p[0]+")"):(!0,"((v="+p[0]+")!=null?v:"+(n?"null)":'"")'))):(u=!0,"\n{view:view,tmpl:"+(k?_.length:"0")+","+a+"},"),x&&!S){if(K="["+K.slice(0,-1)+"]",v='t("'+x+'",view,this,',n||d){if(K=new Function("data,view,j,u"," // "+b+" "+O+" "+x+"\nreturn "+K+";"),K._er=I,K._tag=x,d&&T(f[O-1]=K,d),K._lr=N,n)return K;g=v+O+",undefined,",m=")"}K=$+F+v+(K.deps&&O||K)+")",d=0,x=0}I&&!S&&(L=!0,K+=";\n}catch(e){ret"+(n?"urn ":"+=")+g+"j._err(e,view,"+I+")"+m+";}"+(n?"":"ret=ret"))}K="// "+b+"\nvar v"+(u?",t=j._tag":"")+(l?",c=j._cnvt":"")+(c?",h=j._html":"")+(n?";\n":',ret=""\n')+(B.debug?"debugger;":"")+K+(n?"\n":";\nreturn ret;");try{K=new Function("data,view,j,u",K)}catch(t){C("Compiled template code:\n\n"+K+'\n: "'+(t.message||t)+'"')}return e&&(e.fn=K,e.useViews=!!L),K}function D(t,e){return t&&t!==e?e?u(u({},e),t):t:e&&u({},e)}function E(t){return _t[t]||(_t[t]="&#"+t.charCodeAt(0)+";")}function I(t,n,i){var r=this.jquery&&(this[0]||A("Unknown template")),s=r.getAttribute(xt);return x.call(s&&e.data(r)[kt]||H(r),t,n,i)}function F(t){return void 0!=t?pt.test(t)&&(""+t).replace(vt,E)||t:""}var z=!1===e;e=e&&e.fn?e:t.jQuery;var N,O,L,K,B,V,M,H,P,Q,U,W,J,G,Z,X,Y,tt,et,nt,it,rt,st="_ocp",ot=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,at=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g,ut=/[ \t]*(\r\n|\n|\r)/g,ct=/\\(['"])/g,lt=/['"\\]/g,ht=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$_\.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,ft=/^if\s/,dt=/<(\w+)[>\s]/,pt=/[\x00`><\"'&=]/,gt=/^on[A-Z]|^convert(Back)?$/,mt=/^\#\d+_`[\s\S]*\/\d+_`$/,vt=/[\x00`><"'&=]/g,yt=0,_t={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;","=":"&#61;"},bt="html",wt="object",xt="data-jsv-tmpl",kt="jsvTmpl",At="For #index in nested block use #getIndex().",Ct={},St=t.jsrender,Tt=St&&e&&!e.render,$t={template:{compile:g},tag:{compile:function(t,e,n){function r(){this._={unlinked:!0},this.inline=!0,this.tagName=t}e.bindTo;var s,o,a,c=new W._tg;if(V(e)?e={depends:e.depends,render:e}:""+e===e&&(e={template:e}),o=e.baseTag){e.flow=!!e.flow,e.baseTag=o=""+o===o?n&&n.tags[o]||U[o]:o,c=u(c,o);for(a in e)c[a]=i(o[a],e[a])}else c=u(c,e);return void 0!==(s=c.template)&&(c.template=""+s===s?H[s]||H(s):s),(r.prototype=c).constructor=c._ctr=r,n&&(c._parentTmpl=n),c}},viewModel:{compile:function(t,n){function i(t){c.apply(this,t)}function r(){return new i(arguments)}function s(t,e){for(var n,i,r,s,o=0;o<_;o++)n=void 0,(r=h[o])+""!==r&&(r=(n=r).getter),void 0===(s=t[r])&&n&&void 0!==(i=n.defaultVal)&&(s=m(i,t)),e(s,n&&l[n.type],r)}function o(t){t=t+""===t?JSON.parse(t):t;var e,n,i,o,a,u,c,l,h,f=0,p=this;if(M(p)){for(c={},h=[],n=t.length,i=p.length;f<n;f++){for(l=t[f],u=!1,e=0;e<i&&!u;e++)c[e]||(a=p[e],d&&(c[e]=u=d+""===d?l[d]&&(w[d]?a[d]():a[d])===l[d]:d(a,l)));u?(a.merge(l),h.push(a)):h.push(r.map(l))}b?b(p).refresh(h,!0):p.splice.apply(p,[0,p.length].concat(h))}else{s(t,function(t,e,n){e?p[n]().merge(t):p[n](t)});for(o in t)o===B||w[o]||(p[o]=t[o])}}function a(){var t,e,n,i,r=0;if(M(this))return v(this);for(t={};r<_;r++)n=void 0,(e=h[r])+""!==e&&(e=(n=e).getter),i=this[e](),t[e]=n&&i&&l[n.type]?M(i)?v(i):i.unmap():i;for(e in this)"_is"===e||w[e]||e===B||"_"===e.charAt(0)&&w[e.slice(1)]||V(this[e])||(t[e]=this[e]);return t}var u,c,l=this,h=n.getters,f=n.extend,d=n.id,p=e.extend({_is:t||"unnamed",unmap:a,merge:o},f),g="",y="",_=h?h.length:0,b=e.observable,w={};for(i.prototype=p,u=0;u<_;u++)!function(t){t=t.getter||t,w[t]=u+1;var e="_"+t;g+=(g?",":"")+t,y+="this."+e+" = "+t+";\n",p[t]=p[t]||function(n){if(!arguments.length)return this[e];b?b(this).setProperty(t,n):this[e]=n},b&&(p[t].set=p[t].set||function(t){this[e]=t})}(h[u]);return c=new Function(g,y.slice(0,-1)),c.prototype=p,p.constructor=c,r.map=function(e){var n,i,r=0,u=e=e+""===e?JSON.parse(e):e,c=[];if(M(e)){for(n=(e=e||[]).length;r<n;r++)c.push(this.map(e[r]));return c._is=t,c.unmap=a,c.merge=o,c}if(e){s(e,function(t,e){e&&(t=e.map(t)),c.push(t)}),u=this.apply(this,c);for(i in e)i===B||w[i]||(u[i]=e[i])}return u},r.getters=h,r.extend=f,r.id=d,r}},helper:{},converter:{}};if(K={jsviews:"v0.9.90",sub:{View:p,Err:a,tmplFn:S,parse:q,extend:u,extendCtx:D,syntaxErr:C,onStore:{template:function(t,e){null===e?delete Ct[t]:Ct[t]=e}},addSetting:b,settings:{allowCode:!1},advSet:o,_ths:r,_gm:i,_tg:function(){},_cnvt:function(t,e,n,i){var s,o,a,c,l="number"==typeof n&&e.tmpl.bnds[n-1],h=e.linkCtx;if(void 0===i&&l&&l._lr&&(i=""),void 0!==i?n=i={props:{},args:[i]}:l&&(n=l(e.data,e,W)),l=l._bd&&l,o=n.args[0],t||l){if(s=h&&h.tag,n.view=e,!s){if(s=u(new W._tg,{_:{bnd:l,unlinked:!0},inline:!h,tagName:":",convert:t,flow:!0,tagCtx:n}),(a=n.args.length)>1)for(c=s.bindTo=[];a--;)c.unshift(a);h&&(h.tag=s,s.linkCtx=h),n.ctx=D(n.ctx,(h?h.view:e).ctx),r(s,n)}s._er=i&&o,s.ctx=n.ctx||s.ctx||{},n.ctx=void 0,o=s.cvtArgs()[0]}return void 0!=(o=l&&e._.onRender?e._.onRender(o,e,s):o)?o:""},_tag:function(t,e,n,i,s,o){function a(t){var e;(e=u[t])&&(u[t]=e=M(e)?e:[e],I!==e.length&&A(t+" length not same as bindTo "))}var u,c,l,h,f,p,g,m,v,y,_,b,w,C,S,T,$,j,q,R,E,I,F=0,z="",N=(e=e||L).linkCtx||0,O=e.ctx,K=n||e.tmpl,B="number"==typeof i&&e.tmpl.bnds[i-1];for("tag"===t._is?(t=(u=t).tagName,i=u.tagCtxs,u.template):(c=e.getRsc("tags",t)||A("Unknown tag: {{"+t+"}} ")).template,void 0===o&&B&&(B._lr=(c.lateRender||B._lr)&&"false"!==B._lr)&&(o=""),void 0!==o?(z+=o,i=o=[{props:{},args:[],params:{}}]):B&&(i=B(e.data,e,W)),p=i.length;F<p;F++)w=(v=i[F]).tmpl,(!N||!N.tag||F&&!N.tag.inline||u._er||w&&+w===w)&&(w&&K.tmpls&&(v.tmpl=v.content=K.tmpls[w-1]),v.index=F,v.render=x,v.view=e,v.ctx=D(v.ctx,O)),(n=v.props.tmpl)&&(v.tmpl=e.getTmpl(n),v.content=v.content||v.tmpl),u||(C=!!(u=new c._ctr).init,u.parent=f=O&&O.tag,u.tagCtxs=i,q=u.dataMap,N&&(u.inline=!1,N.tag=u,u.linkCtx=N),(u._.bnd=B||N.fn)?u._.arrVws={}:u.dataBoundOnly&&A(t+" must be data-bound:\n{^{"+t+"}}")),i=u.tagCtxs,q=u.dataMap,v.tag=u,q&&i&&(v.map=i[F].map),u.flow||(y=v.ctx=v.ctx||{},l=u.parents=y.parentTags=O&&D(y.parentTags,O.parentTags)||{},f&&(l[f.tagName]=f),l[u.tagName]=y.tag=u);if(!(u._er=o)){for(r(u,i[0]),u.rendering={},F=0;F<p;F++){if(v=u.tagCtx=i[F],j=v.props,u.ctx=v.ctx,!F){if(C&&(u.init(v,N,u.ctx),C=void 0),v.args.length||!1===u.argDefault||(v.args=$=[v.view.data],v.params.args=["#data"]),void 0!==(b=u.bindTo))for(g=(b=u.bindTo=M(b)?b:[b]).length;g--;)E=b[g],isNaN(parseInt(E))||(E=parseInt(E)),b[g]=E;b=u.bindTo||[0],I=b.length,u._.bnd&&(a("linkedElement"),a("linkedCtxParam")),N&&(N.attr=u.attr=N.attr||u.attr),h=u.attr,u._.noVws=h&&h!==bt}if($=u.cvtArgs(void 0,F),u.linkedCtxParam)for(g=I;g--;)(_=u.linkedCtxParam[g])&&(E=b[g],v.ctx[_]=W._cp(d(v,E),d(v.params,E),v.view,u._.bnd&&{tag:u,ind:g,tagElse:F}));(S=j.dataMap||q)&&($.length||j.dataMap)&&((T=v.map)&&T.src===$[0]&&!s||(T&&T.src&&T.unmap(),T=v.map=S.map($[0],j,void 0,!u._.bnd)),$=[T.tgt]),m=void 0,u.render&&(m=u.render.apply(u,$),e.linked&&m&&!mt.test(m)&&((n={links:[]}).render=n.fn=function(){return m},m=k(n,e.data,void 0,!0,e,void 0,void 0,u))),$.length||($=[e]),void 0===m&&(R=$[0],u.contentCtx&&(R=!0===u.contentCtx?e:u.contentCtx(R)),m=v.render(R,!0)||(s?void 0:"")),z=z?z+(m||""):m}u.rendering=void 0}return u.tagCtx=i[0],u.ctx=u.tagCtx.ctx,u._.noVws&&u.inline&&(z="text"===h?P.html(z):""),B&&e._.onRender?e._.onRender(z,e,u):z},_er:A,_err:function(t,e,n){var i=void 0!==n?V(n)?n.call(e.data,t,e):n||"":"{Error: "+(t.message||t)+"}";return J.onError&&void 0!==(n=J.onError.call(e.data,t,n&&i,e))&&(i=n),e&&!e.linkCtx?P.html(i):i},_cp:s,_sq:function(t){return"constructor"===t&&C(""),t}},settings:{delimiters:c,advanced:function(t){return t?(u(G,t),W.advSet(),Z):G}},map:w},(a.prototype=new Error).constructor=a,l.depends=function(){return[this.get("item"),"index"]},h.depends="index",p.prototype={get:function(t,e){e||!0===t||(e=t,t=void 0);var n,i,r,s,o=this,a=!e||"root"===e;if(t){if(!(s=e&&o.type===e&&o))if(n=o.views,o._.useKey){for(i in n)if(s=e?n[i].get(t,e):n[i])break}else for(i=0,r=n.length;!s&&i<r;i++)s=e?n[i].get(t,e):n[i]}else if(a)s=o.root;else for(;o&&!s;)s=o.type===e?o:void 0,o=o.parent;return s},getIndex:h,getRsc:function(t,e){var n,i,r=this;if(""+e===e){for(;void 0===n&&r;)n=(i=r.tmpl&&r.tmpl[t])&&i[e],r=r.parent;return n||K[t][e]}},getTmpl:function(t){return t&&(t.fn?t:this.getRsc("templates",t)||H(t))},ctxPrm:f,_is:"view"},W=K.sub,Z=K.settings,!(St||e&&e.render)){for(N in $t)_(N,$t[N]);P=K.converters,Q=K.helpers,U=K.tags,W._tg.prototype={baseApply:function(t){return this.base.apply(this,t)},cvtArgs:function(t,e){var n,i,r,s,o,a,u,c=this;if(c.tagName?c=(a=c).tagCtxs?a.tagCtxs[e||0]:a.tagCtx:a=c.tag,o=a.bindTo,s=c.args,(u=a.convert)&&""+u===u&&(u="true"===u?void 0:c.view.getRsc("converters",u)||A("Unknown converter: '"+u+"'")),t&&t.length)s=t;else if(u&&!t&&(s=s.slice()),o){for(r=[],n=o.length;n--;)i=o[n],r.unshift(d(c,i));t&&(s=r)}if(u)if(o=o||[0],n=o.length,u=u.apply(a,r||s),M(u)&&u.length===n||(u=[u],o=[0],n=1),t)s=u;else for(;n--;)+(i=o[n])===i&&(s[i]=u[n]);return s},bndArgs:function(t){return this.cvtArgs(!0,t)},ctxPrm:f},L=W.topView=new p,e?(e.fn.render=I,B=e.expando,e.observable&&(u(W,e.views.sub),K.map=e.views.map)):(e={},z&&(t.jsrender=e),e.renderFile=e.__express=e.compile=function(){throw"Node.js: use npm jsrender, or jsrender-node.js"},e.isFunction=function(t){return"function"==typeof t},e.isArray=Array.isArray||function(t){return"[object Array]"==={}.toString.call(t)},W._jq=function(t){t!==e&&(u(t,e),(e=t).fn.render=I,delete e.jsrender,B=e.expando)},e.jsrender="v0.9.90"),(J=W.settings).allowCode=!1,V=e.isFunction,e.render=Ct,e.views=K,e.templates=H=K.templates;for(it in J)b(it);(Z.debugMode=function(t){return void 0===t?J.debugMode:(J.debugMode=t,J.onError=t+""===t?new Function("","return '"+t+"';"):V(t)?t:void 0,Z)})(!1),G=J.advanced={useViews:!1,_jsv:!1},U({if:{render:function(t){var e=this.tagCtx;return this.rendering.done||!t&&(arguments.length||!e.index)?"":(this.rendering.done=!0,void(this.selected=e.index))},contentCtx:!0,flow:!0},for:{render:function(t){var e,n=!arguments.length,i=this.tagCtx,r="",s=0;return this.rendering.done||(void 0!==(e=n?i.view.data:t)&&(r+=i.render(e,n),s+=M(e)?e.length:1),(this.rendering.done=s)&&(this.selected=i.index)),r},flow:!0},props:{baseTag:"for",dataMap:w(function(t){var e,n,i=[];if(typeof t===wt)for(e in t)n=t[e],e!==B&&t.hasOwnProperty(e)&&!V(n)&&i.push({key:e,prop:n});return i}),flow:!0},include:{flow:!0},"*":{render:s,flow:!0},":*":{render:s,flow:!0},dbg:Q.dbg=P.dbg=function(t){try{throw console.log("JsRender dbg breakpoint: "+t),"dbg breakpoint"}catch(t){}return this.base?this.baseApply(arguments):t}}),P({html:F,attr:F,url:function(t){return void 0!=t?encodeURI(""+t):null===t?t:""}})}return J=W.settings,M=(e||St).isArray,Z.delimiters("{{","}}","^"),Tt&&St.views.sub._jq(e),e||St},window);